// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db"
}

model User {
  id             Int      @id @default(autoincrement())
  name           String
  email          String   @unique
  hashedPassword String
  avatarUrl      String?
  walls          Wall[]
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
}

model Wall {
  id              Int      @id @default(autoincrement())
  title           String
  shareLink       String?
  backgroundColor String?  @default("#f0f0f0") // Novo campo para cor de fundo
  backgroundImage String?                      // Novo campo para imagem de fundo
  createdAt       DateTime @default(now())
  ownerId         Int
  owner           User     @relation(fields: [ownerId], references: [id])
  notes           Note[]
  edges           Edge[]
}

model Note {
  id          Int      @id @default(autoincrement())
  type        NoteType @default(TEXT)
  textContent String?
  mediaUrl    String? 
  color       String?  @default("#ffffff") // Novo campo para cor da nota
  authorId    Int
  positionX   Float?
  positionY   Float?
  wallId      Int
  wall        Wall     @relation(fields: [wallId], references: [id])
}

model Edge {
  id       Int    @id @default(autoincrement())
  sourceId String
  targetId String
  wallId   Int
  wall     Wall   @relation(fields: [wallId], references: [id])
}

enum NoteType {
  TEXT
  IMAGE
  VIDEO
  PDF
  LINK
}